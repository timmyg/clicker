{"version":3,"sources":["webpack:///./src/app/guards/reservation.guard.ts","webpack:///./src/app/reserve/components/confirmation/confirmation.component.html","webpack:///./src/app/reserve/components/confirmation/confirmation.component.scss","webpack:///./src/app/reserve/components/confirmation/confirmation.component.ts","webpack:///./src/app/reserve/components/locations/locations.component.html","webpack:///./src/app/reserve/components/locations/locations.component.scss","webpack:///./src/app/reserve/components/locations/locations.component.ts","webpack:///./src/app/reserve/components/programs/program/program.component.html","webpack:///./src/app/reserve/components/programs/program/program.component.scss","webpack:///./src/app/reserve/components/programs/program/program.component.ts","webpack:///./src/app/reserve/components/programs/programs.component.html","webpack:///./src/app/reserve/components/programs/programs.component.scss","webpack:///./src/app/reserve/components/programs/programs.component.ts","webpack:///./src/app/reserve/components/tvs/tvs.component.html","webpack:///./src/app/reserve/components/tvs/tvs.component.scss","webpack:///./src/app/reserve/components/tvs/tvs.component.ts","webpack:///./src/app/reserve/pipes/locations-filter.pipe.ts","webpack:///./src/app/reserve/pipes/programs-filter.pipe.ts","webpack:///./src/app/reserve/reserve.module.ts","webpack:///./src/app/reserve/reserve.page.html","webpack:///./src/app/reserve/reserve.page.scss","webpack:///./src/app/reserve/reserve.page.ts","webpack:///./src/app/reserve/reserve.service.ts","webpack:///./src/app/state/location/index.ts","webpack:///./src/app/state/program/index.ts"],"names":[],"mappings":"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","file":"reserve-reserve-module.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, Router } from '@angular/router';\nimport { Observable, of } from 'rxjs';\nimport { Store } from '@ngrx/store';\nimport * as fromStore from '../state/app.reducer';\nimport { getReservation } from 'src/app/state/reservation';\nimport { Reservation } from '../state/reservation/reservation.model';\nimport { take, map } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ReservationGuard implements CanActivate {\n  reservation$: Observable<Partial<Reservation>>;\n\n  constructor(private store: Store<fromStore.AppState>, private router: Router) {\n    this.reservation$ = this.store.select(getReservation);\n  }\n\n  canActivate(\n    next: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot,\n  ): Observable<boolean> | Promise<boolean> | boolean {\n    return this.reservation$.pipe(\n      take(1),\n      map(r => {\n        const isValidReservation = r && r.location !== null;\n        if (!isValidReservation) {\n          console.info('bad reservation, starting over');\n          this.router.navigate(['/tabs/reserve']);\n        }\n        return isValidReservation;\n      }),\n    );\n  }\n}\n","module.exports = \"<ion-card *ngIf=\\\"(reservation$ | async) as reservation\\\">\\n  <ion-card-content>\\n    <ion-list id=\\\"length\\\">\\n      <ion-radio-group (ionChange)=\\\"onLengthChange($event)\\\">\\n        <ion-list-header *ngIf=\\\"!isEditMode\\\"> Reservation Length </ion-list-header>\\n        <ion-list-header *ngIf=\\\"isEditMode\\\"> Extend Reservation Length </ion-list-header>\\n        <ion-item *ngFor=\\\"let p of availablePlans\\\">\\n          <ion-label flex ion-justify-items-end>\\n            <span>{{ p.title }}</span>\\n            <div flex ion-align-items-center float-right>\\n              <img class=\\\"coin ion-float-right\\\" src=\\\"./assets/coin.svg\\\" width=\\\"22\\\" height=\\\"22\\\" />\\n              <span padding-start>{{ p.tokens }}</span>\\n            </div>\\n          </ion-label>\\n          <ion-radio slot=\\\"start\\\" value=\\\"{{ p.minutes }}\\\" [disabled]=\\\"saving\\\" checked></ion-radio>\\n        </ion-item>\\n      </ion-radio-group>\\n    </ion-list>\\n    <p class=\\\"ion-text-center\\\" padding-top>\\n      <!-- show always -->\\n      <span\\n        >You are tuning <b>TV {{ reservation.box.label }}</b> to <b>{{ reservation.program.channelTitle }} </b></span\\n      >\\n      <!-- show if new and reserving, or editing -->\\n      <span *ngIf=\\\"reservation.reserve || isEditMode; else oneTime\\\">\\n        and reserving until <b>{{ reservationEnd$ | async | amDateFormat: 'h:mma' }}</b\\n        >. You will be able to freely change the channel during your reservation.\\n      </span>\\n      <!-- show when new and not reserving -->\\n      <ng-template #oneTime> <span *ngIf=\\\"!editMode\\\">but others will be able to change the channel</span> </ng-template>\\n    </p>\\n    <ion-button\\n      color=\\\"success\\\"\\n      size=\\\"large\\\"\\n      expand=\\\"block\\\"\\n      (click)=\\\"onConfirm(reservation)\\\"\\n      slot=\\\"end\\\"\\n      [disabled]=\\\"saving || !sufficientFunds\\\"\\n      margin-top\\n      align-items-center\\n    >\\n      <ion-row *ngIf=\\\"!saving; else isSaving\\\">\\n        <span>Confirm</span> <img class=\\\"coin\\\" src=\\\"./assets/coin.svg\\\" width=\\\"22\\\" height=\\\"22\\\" padding-start />\\n        <span>{{ reservation.cost }}</span>\\n      </ion-row>\\n      <ng-template #isSaving>\\n        Tuning\\n        <ion-spinner name=\\\"crescent\\\" margin-start></ion-spinner>\\n      </ng-template>\\n    </ion-button>\\n    <ion-row class=\\\"ion-text-center\\\" *ngIf=\\\"reservation.location && reservation.location.name\\\">\\n      <p class=\\\"center\\\">{{ reservation.location.name }} ({{ reservation.location.neighborhood }})</p></ion-row\\n    >\\n    <ion-row class=\\\"ion-text-center\\\" *ngIf=\\\"!sufficientFunds\\\" margin-top>\\n      <ion-text color=\\\"danger\\\">\\n        Heads up! You only have {{ tokenCount }} <span *ngIf=\\\"tokenCount && tokenCount === 1; else tokens\\\">token</span\\n        ><ng-template #tokens>tokens</ng-template> remaining. Please\\n        <span *ngIf=\\\"!isLoggedIn\\\"><a [routerLink]=\\\"'/tabs/profile'\\\">login</a> and </span>\\n        <a [routerLink]=\\\"'/tabs/profile'\\\" *ngIf=\\\"isLoggedIn\\\">add funds</a><span *ngIf=\\\"!isLoggedIn\\\">add funds</span>.\\n      </ion-text>\\n    </ion-row>\\n  </ion-card-content>\\n</ion-card>\\n\"","module.exports = \"ion-spinner {\\n  vertical-align: middle; }\\n\\nion-icon.sport {\\n  display: inline; }\\n\\nion-icon.sport[name='basketball'] {\\n    color: #fa8320; }\\n\\nion-icon.sport[name='american-football'] {\\n    color: #624a2e; }\\n\\nion-icon.sport ::ng-deep svg {\\n    height: 30px; }\\n\\n.coin {\\n  display: inline-block;\\n  width: inherit; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90aW1naWJsaW4vQ29kZS9jbGlja2VyL21vYmlsZS9hcHAvc3JjL2FwcC9yZXNlcnZlL2NvbXBvbmVudHMvY29uZmlybWF0aW9uL2NvbmZpcm1hdGlvbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHNCQUFzQixFQUFBOztBQUl4QjtFQUNFLGVBQWUsRUFBQTs7QUFEakI7SUFHSSxjQUFjLEVBQUE7O0FBSGxCO0lBTUksY0FBYyxFQUFBOztBQU5sQjtJQVNJLFlBQVksRUFBQTs7QUFJaEI7RUFDRSxxQkFBcUI7RUFDckIsY0FBYyxFQUFBIiwiZmlsZSI6InNyYy9hcHAvcmVzZXJ2ZS9jb21wb25lbnRzL2NvbmZpcm1hdGlvbi9jb25maXJtYXRpb24uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tc3Bpbm5lciB7XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG59XG5cbi8vIFRPRE8gZHVwbGljYXRlZFxuaW9uLWljb24uc3BvcnQge1xuICBkaXNwbGF5OiBpbmxpbmU7XG4gICZbbmFtZT0nYmFza2V0YmFsbCddIHtcbiAgICBjb2xvcjogI2ZhODMyMDtcbiAgfVxuICAmW25hbWU9J2FtZXJpY2FuLWZvb3RiYWxsJ10ge1xuICAgIGNvbG9yOiAjNjI0YTJlO1xuICB9XG4gIDo6bmctZGVlcCBzdmcge1xuICAgIGhlaWdodDogMzBweDtcbiAgfVxufVxuXG4uY29pbiB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgd2lkdGg6IGluaGVyaXQ7XG59XG5cbi8vICNsZW5ndGgge1xuLy8gICBpb24tbGFiZWwge1xuLy8gICAgIGRpc3BsYXk6IGZsZXg7XG4vLyAgIH1cbi8vIH1cbiJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { Reservation } from '../../../state/reservation/reservation.model';\nimport { ReserveService } from '../../reserve.service';\nimport { Observable, interval } from 'rxjs';\nimport { Store } from '@ngrx/store';\nimport { getReservation } from 'src/app/state/reservation';\nimport * as fromStore from '../../../state/app.reducer';\nimport * as fromReservation from '../../../state/reservation/reservation.actions';\nimport { Router } from '@angular/router';\nimport * as moment from 'moment';\nimport { ToastController } from '@ionic/angular';\nimport { startWith, map, distinctUntilChanged, first, filter } from 'rxjs/operators';\nimport { isLoggedIn, getUserTokenCount } from 'src/app/state/user';\nimport { Actions, ofType } from '@ngrx/effects';\n\n@Component({\n  selector: 'app-confirmation',\n  templateUrl: './confirmation.component.html',\n  styleUrls: ['./confirmation.component.scss'],\n})\nexport class ConfirmationComponent implements OnInit {\n  reservation$: Observable<Partial<Reservation>>;\n  reservationEnd$: Observable<Date>;\n  tokenCount$: Observable<number>;\n  tokenCount: number;\n  isLoggedIn$: Observable<boolean>;\n  reservation: Partial<Reservation>;\n  title = 'Confirmation';\n  isLoggedIn: boolean;\n  saving: boolean;\n  isEditMode: boolean;\n  sufficientFunds: boolean;\n  private reservationPlans = [\n    {\n      tokens: 1,\n      title: \"Don't reserve\",\n      minutes: 0,\n    },\n    {\n      tokens: 2,\n      title: '30 minutes',\n      minutes: 30,\n      reserve: true,\n    },\n    {\n      tokens: 4,\n      title: '1 hour',\n      minutes: 60,\n      reserve: true,\n    },\n  ];\n\n  constructor(\n    private store: Store<fromStore.AppState>,\n    private reserveService: ReserveService,\n    private router: Router,\n    public toastController: ToastController,\n    private actions$: Actions,\n  ) {\n    this.reservation$ = this.store.select(getReservation);\n    this.reserveService.emitTitle(this.title);\n    this.tokenCount$ = this.store.select(getUserTokenCount);\n    this.isLoggedIn$ = this.store.select(isLoggedIn);\n  }\n\n  ngOnInit() {\n    this.reservation$\n      .pipe(\n        filter(r => r !== null),\n        first(),\n      )\n      .subscribe(reservation => {\n        this.reservation = reservation;\n        if (reservation.id) {\n          this.isEditMode = true;\n        }\n      });\n    this.tokenCount$.subscribe(tokens => {\n      this.tokenCount = tokens;\n    });\n    this.isLoggedIn$.subscribe(isLoggedIn => {\n      this.isLoggedIn = isLoggedIn;\n    });\n  }\n\n  get availablePlans() {\n    if (this.isEditMode) {\n      this.reservationPlans[0].title = \"Don't extend\";\n      this.reservationPlans[0].tokens = 0;\n    }\n    return this.reservationPlans;\n  }\n\n  onLengthChange(e) {\n    const plan = this.reservationPlans.find(p => p.minutes === +e.detail.value);\n    this.reservation.cost = plan.tokens;\n    // const endTimeInitial = this.reservation.end ? moment(this.reservation.end) : moment();\n    this.reservation.minutes = plan.minutes;\n    this.reservation.reserve = plan.reserve;\n    this.checkWallet();\n    this.reservationEnd$ = interval(15 * 1000).pipe(\n      startWith(\n        this.getInitialEndTime()\n          .clone()\n          .add(plan.minutes, 'm')\n          .toDate(),\n      ), // this sets inital value\n      map(() => {\n        return this.getInitialEndTime()\n          .clone()\n          .add(plan.minutes, 'm')\n          .toDate();\n      }),\n      distinctUntilChanged(),\n    );\n  }\n\n  checkWallet() {\n    this.tokenCount >= this.reservation.cost ? (this.sufficientFunds = true) : (this.sufficientFunds = false);\n  }\n\n  getInitialEndTime() {\n    return this.reservation.end ? moment(this.reservation.end) : moment();\n  }\n\n  onConfirm() {\n    this.saving = true;\n    this.isEditMode\n      ? this.store.dispatch(new fromReservation.Update(this.reservation))\n      : this.store.dispatch(new fromReservation.Create(this.reservation));\n    const reservation = this.reservation;\n    this.actions$\n      .pipe(ofType(fromReservation.CREATE_RESERVATION_SUCCESS, fromReservation.UPDATE_RESERVATION_SUCCESS))\n      .pipe(first())\n      .subscribe(() => {\n        this.store.dispatch(new fromReservation.Start());\n        this.router.navigate(['/tabs/profile']);\n        this.showTunedToast(reservation.box.label, reservation.program.channelTitle);\n      });\n    this.actions$\n      .pipe(ofType(fromReservation.CREATE_RESERVATION_FAIL, fromReservation.UPDATE_RESERVATION_FAIL))\n      .pipe(first())\n      .subscribe(() => {\n        // this.store.dispatch(new fromReservation.Start());\n        // this.router.navigate(['/tabs/profile']);\n        this.showErrorToast();\n        this.saving = false;\n      });\n  }\n\n  async showTunedToast(label: string, channelName: string) {\n    const toast = await this.toastController.create({\n      message: `TV ${label} successfully changed to ${channelName}`,\n      duration: 2000,\n      cssClass: 'ion-text-center',\n    });\n    toast.present();\n  }\n\n  async showErrorToast() {\n    const toast = await this.toastController.create({\n      message: `Something went wrong, please try again`,\n      duration: 2000,\n      cssClass: 'ion-text-center',\n      color: 'danger',\n    });\n    toast.present();\n  }\n}\n","module.exports = \"<ion-row *ngIf=\\\"(isLoading$ | async) || evaluatingGeolocation\\\" margin-vertical>\\n  <ion-spinner name=\\\"crescent\\\" class=\\\"center\\\"></ion-spinner>\\n</ion-row>\\n\\n<section>\\n  <section\\n    class=\\\"ion-text-center\\\"\\n    padding\\n    *ngIf=\\\"(askForGeolocation$ | async) && !evaluatingGeolocation; else showLocations\\\"\\n  >\\n    <ion-icon name=\\\"pin\\\" class=\\\"location\\\"></ion-icon>\\n    <p>\\n      Clicker would like to access your location for more accurate location details. This data is not stored anywhere.\\n    </p>\\n    <div><ion-button margin-top (click)=\\\"allowLocation()\\\">Allow Location Access </ion-button></div>\\n    <div><ion-button fill=\\\"clear\\\" (click)=\\\"denyLocation()\\\">No Thanks </ion-button></div>\\n  </section>\\n\\n  <ng-template #showLocations>\\n    <ion-list lines=\\\"none\\\">\\n      <p *ngIf=\\\"geolocationDeclined && !evaluatingGeolocation\\\" class=\\\"ion-text-center\\\" padding>\\n        Find locations around you by allowing location services in your settings\\n      </p>\\n      <ion-item-sliding\\n        *ngFor=\\\"let location of (locations$ | async | locationsFilter: searchTerm)\\\"\\n        [ngClass]=\\\"{ inactive: !isAvailable(location) }\\\"\\n        [disabled]=\\\"!isAvailable(location) || !isManager(location)\\\"\\n      >\\n        <ion-item-options side=\\\"start\\\">\\n          <ion-item-option (click)=\\\"onManage(location)\\\">Manage</ion-item-option>\\n        </ion-item-options>\\n        <ion-item>\\n          <ion-card (click)=\\\"isAvailable(location) && onLocationClick(location)\\\">\\n            <ion-card-header>\\n              <ion-card-subtitle>\\n                <span>{{ location.neighborhood }} <span *ngIf=\\\"!isAvailable(location)\\\">(inactive)</span></span>\\n                <ion-icon *ngIf=\\\"!location.connected\\\" name=\\\"wifi\\\" class=\\\"disconnected\\\"></ion-icon>\\n                <ion-icon *ngIf=\\\"isManager(location)\\\" name=\\\"star\\\" class=\\\"manage\\\"></ion-icon>\\n\\n                <span float-right *ngIf=\\\"location.distance\\\">\\n                  <span *ngIf=\\\"location.distance >= 0.2; else near\\\"> {{ location.distance }} miles </span>\\n                  <ng-template #near> Near </ng-template>\\n                </span>\\n              </ion-card-subtitle>\\n            </ion-card-header>\\n            <ion-card-content no-padding-top>\\n              <img [src]=\\\"location.img\\\" class=\\\"logo\\\" />\\n              <h1>{{ location.name }}</h1>\\n            </ion-card-content>\\n          </ion-card>\\n        </ion-item>\\n      </ion-item-sliding>\\n    </ion-list>\\n  </ng-template>\\n</section>\\n\"","module.exports = \"img.logo {\\n  height: 40px;\\n  width: inherit;\\n  float: left;\\n  padding: 0 10px 10px 0; }\\n\\n.inactive {\\n  opacity: 0.4; }\\n\\nion-icon.disconnected {\\n  color: var(--ion-color-danger); }\\n\\nion-icon.location {\\n  color: var(--ion-color-primary);\\n  font-size: 64px; }\\n\\nion-card {\\n  width: 100%; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90aW1naWJsaW4vQ29kZS9jbGlja2VyL21vYmlsZS9hcHAvc3JjL2FwcC9yZXNlcnZlL2NvbXBvbmVudHMvbG9jYXRpb25zL2xvY2F0aW9ucy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFlBQVk7RUFDWixjQUFjO0VBQ2QsV0FBVztFQUNYLHNCQUFzQixFQUFBOztBQUd4QjtFQUNFLFlBQVksRUFBQTs7QUFHZDtFQUNFLDhCQUE4QixFQUFBOztBQUdoQztFQUNFLCtCQUErQjtFQUMvQixlQUFlLEVBQUE7O0FBR2pCO0VBQ0UsV0FBVyxFQUFBIiwiZmlsZSI6InNyYy9hcHAvcmVzZXJ2ZS9jb21wb25lbnRzL2xvY2F0aW9ucy9sb2NhdGlvbnMuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpbWcubG9nbyB7XG4gIGhlaWdodDogNDBweDtcbiAgd2lkdGg6IGluaGVyaXQ7XG4gIGZsb2F0OiBsZWZ0O1xuICBwYWRkaW5nOiAwIDEwcHggMTBweCAwO1xufVxuXG4uaW5hY3RpdmUge1xuICBvcGFjaXR5OiAwLjQ7XG59XG5cbmlvbi1pY29uLmRpc2Nvbm5lY3RlZCB7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItZGFuZ2VyKTtcbn1cblxuaW9uLWljb24ubG9jYXRpb24ge1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xuICBmb250LXNpemU6IDY0cHg7XG59XG5cbmlvbi1jYXJkIHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi8vIDo6bmctZGVlcCAuYWN0aW9uLXNoZWV0LWJ1dHRvbiB7XG4vLyAgICYuZGFuZ2VyIHtcbi8vICAgICBpb24taWNvbiB7XG4vLyAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWRhbmdlcikgIWltcG9ydGFudDtcbi8vICAgICB9XG4vLyAgIH1cbi8vICAgJi5zdWNjZXNzIHtcbi8vICAgICBpb24taWNvbiB7XG4vLyAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXN1Y2Nlc3MpICFpbXBvcnRhbnQ7XG4vLyAgICAgfVxuLy8gICB9XG4vLyB9XG4iXX0= */\"","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Location } from 'src/app/state/location/location.model';\nimport { ReserveService } from '../../reserve.service';\nimport { Observable, Subscription, BehaviorSubject, forkJoin } from 'rxjs';\nimport { getAllLocations, getLoading } from 'src/app/state/location';\nimport { getUserLocations, getUserRoles } from 'src/app/state/user';\nimport { Store } from '@ngrx/store';\nimport * as fromStore from '../../../state/app.reducer';\nimport * as fromLocation from '../../../state/location/location.actions';\nimport * as fromUser from '../../../state/user/user.actions';\nimport * as fromReservation from '../../../state/reservation/reservation.actions';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { NavController, ActionSheetController } from '@ionic/angular';\nimport { first, take } from 'rxjs/operators';\nimport { Reservation } from 'src/app/state/reservation/reservation.model';\nimport { Geolocation as Geo } from 'src/app/state/location/geolocation.model';\nimport { ofType, Actions } from '@ngrx/effects';\nimport { Plugins } from '@capacitor/core';\nconst { Geolocation } = Plugins;\nimport { Storage } from '@ionic/storage';\nconst permissionGeolocation = {\n  name: 'permission.geolocation',\n  values: {\n    allowed: 'allowed',\n    probably: 'probably',\n    denied: 'denied',\n  },\n};\n\n@Component({\n  templateUrl: './locations.component.html',\n  styleUrls: ['./locations.component.scss'],\n})\nexport class LocationsComponent implements OnDestroy, OnInit {\n  locations$: Observable<Location[]>;\n  title = 'Choose Location';\n  isLoading$: Observable<boolean>;\n  userLocations$: Observable<string[]>;\n  userLocations: string[];\n  userRoles$: Observable<string[]>;\n  userRoles: string[];\n  searchTerm: string;\n  refreshSubscription: Subscription;\n  searchSubscription: Subscription;\n  closeSearchSubscription: Subscription;\n  askForGeolocation$ = new BehaviorSubject<boolean>(true);\n  userGeolocation: Geo;\n  evaluatingGeolocation = true;\n  geolocationDeclined = true;\n\n  constructor(\n    private store: Store<fromStore.AppState>,\n    public actionSheetController: ActionSheetController,\n    private reserveService: ReserveService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private navCtrl: NavController,\n    private actions$: Actions,\n    private storage: Storage,\n  ) {\n    this.locations$ = this.store.select(getAllLocations);\n    this.reserveService.emitTitle(this.title);\n    this.refreshSubscription = this.reserveService.refreshEmitted$.subscribe(() => this.refresh());\n  }\n\n  async ngOnInit() {\n    this.redirectIfUpdating();\n    this.evaluateGeolocation();\n    this.isLoading$ = this.store.select(getLoading);\n    this.userLocations$ = this.store.select(getUserLocations);\n    this.userLocations$.pipe().subscribe(userLocations => {\n      this.userLocations = userLocations;\n    });\n    this.userRoles$ = this.store.select(getUserRoles);\n    this.userRoles$.pipe().subscribe(userRoles => {\n      this.userRoles = userRoles;\n    });\n    this.searchSubscription = this.reserveService.searchTermEmitted$.subscribe(searchTerm => {\n      this.searchTerm = searchTerm;\n    });\n    this.closeSearchSubscription = this.reserveService.closeSearchEmitted$.subscribe(() => {\n      this.searchTerm = null;\n    });\n  }\n\n  ngOnDestroy() {\n    this.refreshSubscription.unsubscribe();\n    this.searchSubscription.unsubscribe();\n    this.closeSearchSubscription.unsubscribe();\n  }\n\n  isManager(location: Location) {\n    const { userLocations, userRoles } = this;\n    if (userLocations && userRoles) {\n      return userLocations.indexOf(location.id) > -1 || userRoles.indexOf('superman') > -1;\n    }\n  }\n\n  private async redirectIfUpdating() {\n    // TODO should be a better way to get reservation\n    const state = await this.store.pipe(first()).toPromise();\n    const reservation: Partial<Reservation> = state.reservation.reservation;\n    // check if editing existing reservation\n    if (reservation && reservation.id) {\n      // is editing\n      if (!reservation.program) {\n        this.navCtrl.navigateForward(['../programs'], {\n          relativeTo: this.route,\n          queryParamsHandling: 'merge',\n          // skipLocationChange: true,\n        });\n      } else {\n        this.navCtrl.navigateForward(['../confirmation'], {\n          relativeTo: this.route,\n          queryParamsHandling: 'merge',\n          // skipLocationChange: true,\n        });\n      }\n    } else {\n      this.store.dispatch(new fromReservation.Start());\n    }\n  }\n\n  refresh() {\n    this.store.dispatch(new fromLocation.GetAll(this.userGeolocation));\n    this.store.dispatch(new fromUser.Refresh());\n    // this.actions$\n    //   .pipe(ofType(fromLocation.GET_ALL_LOCATIONS_SUCCESS))\n    //   .pipe(ofType(fromUser.REFRESH_SUCCESS))\n    //   .pipe(first())\n    forkJoin(\n      this.actions$.pipe(\n        ofType(fromLocation.GET_ALL_LOCATIONS_SUCCESS),\n        take(1),\n      ),\n      this.actions$.pipe(\n        ofType(fromUser.REFRESH_SUCCESS),\n        take(1),\n      ),\n    ).subscribe(() => {\n      this.reserveService.emitRefreshed();\n    });\n  }\n\n  onLocationClick(location: Location) {\n    this.reserveService.emitCloseSearch();\n    this.store.dispatch(new fromReservation.SetLocation(location));\n    this.router.navigate(['../programs'], { relativeTo: this.route, queryParamsHandling: 'merge' });\n  }\n\n  async allowLocation() {\n    await this.storage.set(permissionGeolocation.name, permissionGeolocation.values.probably);\n    this.evaluateGeolocation();\n  }\n\n  async denyLocation() {\n    await this.storage.set(permissionGeolocation.name, permissionGeolocation.values.denied);\n    this.askForGeolocation$.next(false);\n    this.evaluateGeolocation();\n  }\n\n  isAvailable(location: Location) {\n    return location.active && location.connected;\n  }\n\n  async onManage(location: Location) {\n    const actionSheet = await this.actionSheetController.create({\n      header: 'Manage Location',\n      buttons: [\n        {\n          text: 'Turn off all TVs',\n          icon: 'power',\n          cssClass: 'color-danger',\n          handler: () => {\n            this.store.dispatch(new fromLocation.TurnOff(location));\n          },\n        },\n        {\n          text: 'Turn on all TVs',\n          icon: 'power',\n          cssClass: 'color-success',\n          handler: () => {\n            this.store.dispatch(new fromLocation.TurnOn(location));\n          },\n        },\n        // {\n        //   text: 'Turn on all TVs + autotune',\n        //   handler: () => {\n        //     this.store.dispatch(new fromLocation.TurnOn(location));\n        //   },\n        // },\n      ],\n    });\n    await actionSheet.present();\n  }\n\n  private async evaluateGeolocation() {\n    const permissionStatus = await this.storage.get(permissionGeolocation.name);\n    if (\n      permissionStatus &&\n      (permissionStatus === permissionGeolocation.values.allowed ||\n        permissionStatus === permissionGeolocation.values.probably)\n    ) {\n      await Geolocation.getCurrentPosition()\n        .then(response => {\n          this.askForGeolocation$.next(false);\n          this.evaluatingGeolocation = false;\n          this.geolocationDeclined = false;\n          this.storage.set(permissionGeolocation.name, permissionGeolocation.values.allowed);\n          const { latitude, longitude } = response.coords;\n          this.userGeolocation = { latitude, longitude };\n          this.store.dispatch(new fromLocation.GetAll(this.userGeolocation));\n        })\n        .catch(error => {\n          this.evaluatingGeolocation = false;\n          this.askForGeolocation$.next(false);\n          this.store.dispatch(new fromLocation.GetAll(this.userGeolocation));\n          console.error('Error getting location', error);\n        });\n    } else if (permissionStatus === permissionGeolocation.values.denied) {\n      this.askForGeolocation$.next(false);\n      this.evaluatingGeolocation = false;\n      this.store.dispatch(new fromLocation.GetAll());\n    } else {\n      this.askForGeolocation$.next(true);\n      this.evaluatingGeolocation = false;\n    }\n  }\n}\n","module.exports = \"<ion-card (click)=\\\"onProgramClick()\\\">\\n  <ion-card-header>\\n    <ion-card-subtitle>\\n      <span>{{ program.channelTitle }}</span>\\n      <span float-right>{{ program.start | amDateFormat: 'h:mma' }} - {{ program.end | amDateFormat: 'h:mma' }}</span>\\n    </ion-card-subtitle>\\n  </ion-card-header>\\n  <ion-card-content no-padding-top>\\n    <ion-grid no-padding>\\n      <ion-row align-items-center>\\n        <ion-col size=\\\"1\\\" no-padding align-items-center>\\n          <ion-icon [name]=\\\"program.icon\\\" class=\\\"sport {{ program.icon }}\\\" size=\\\"large\\\" fill=\\\"red\\\"></ion-icon>\\n        </ion-col>\\n        <ion-col size=\\\"11\\\">\\n          <h1 class=\\\"title\\\">{{ program.title }} <span class=\\\"faded\\\" *ngIf=\\\"isReplay()\\\">(Replay)</span><ion-icon *ngIf=\\\"program.points >= 5\\\" name=\\\"flame\\\" class=\\\"trending\\\"></ion-icon>\\n          </h1>\\n        </ion-col>\\n        <ion-col size=\\\"12\\\">\\n          <span class=\\\"faded\\\" *ngIf=\\\"program.nextProgramTitle\\\">\\n            Next: {{ getNextProgramTitle() }} at {{ program.nextProgramStart | amDateFormat: 'h:mma' }}\\n          </span>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </ion-card-content>\\n</ion-card>\\n\"","module.exports = \"ion-icon.sport {\\n  display: inline; }\\n  ion-icon.sport.baseball {\\n    color: #e53935; }\\n  ion-icon.sport.basketball {\\n    color: #fb8c00; }\\n  ion-icon.sport.american-football {\\n    color: #795548; }\\n  ion-icon.sport.football {\\n    color: #212121; }\\n  ion-icon.sport.tv {\\n    color: #607d8b; }\\n  ion-icon.trending {\\n  color: #e65100; }\\n  .title {\\n  padding-left: 10px; }\\n  .faded {\\n  opacity: 0.45; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90aW1naWJsaW4vQ29kZS9jbGlja2VyL21vYmlsZS9hcHAvc3JjL2FwcC9yZXNlcnZlL2NvbXBvbmVudHMvcHJvZ3JhbXMvcHJvZ3JhbS9wcm9ncmFtLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUUsZUFBZSxFQUFBO0VBRmpCO0lBSUksY0FBYyxFQUFBO0VBSmxCO0lBT0ksY0FBYyxFQUFBO0VBUGxCO0lBVUksY0FBYyxFQUFBO0VBVmxCO0lBYUksY0FBYyxFQUFBO0VBYmxCO0lBZ0JJLGNBQWMsRUFBQTtFQUlsQjtFQUNFLGNBQWMsRUFBQTtFQUdoQjtFQUNFLGtCQUFrQixFQUFBO0VBR3BCO0VBQ0UsYUFBYSxFQUFBIiwiZmlsZSI6InNyYy9hcHAvcmVzZXJ2ZS9jb21wb25lbnRzL3Byb2dyYW1zL3Byb2dyYW0vcHJvZ3JhbS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1pY29uLnNwb3J0IHtcbiAgLy8gcGFkZGluZzogMCAxMHB4IDAgMDtcbiAgZGlzcGxheTogaW5saW5lO1xuICAmLmJhc2ViYWxsIHtcbiAgICBjb2xvcjogI2U1MzkzNTtcbiAgfVxuICAmLmJhc2tldGJhbGwge1xuICAgIGNvbG9yOiAjZmI4YzAwO1xuICB9XG4gICYuYW1lcmljYW4tZm9vdGJhbGwge1xuICAgIGNvbG9yOiAjNzk1NTQ4O1xuICB9XG4gICYuZm9vdGJhbGwge1xuICAgIGNvbG9yOiAjMjEyMTIxO1xuICB9XG4gICYudHYge1xuICAgIGNvbG9yOiAjNjA3ZDhiO1xuICB9XG59XG5cbmlvbi1pY29uLnRyZW5kaW5nIHtcbiAgY29sb3I6ICNlNjUxMDA7XG59XG5cbi50aXRsZSB7XG4gIHBhZGRpbmctbGVmdDogMTBweDtcbn1cblxuLmZhZGVkIHtcbiAgb3BhY2l0eTogMC40NTtcbn1cbiJdfQ== */\"","import { Component, Input, EventEmitter, Output } from '@angular/core';\nimport { Program } from 'src/app/state/program/program.model';\nimport { ReserveService } from 'src/app/reserve/reserve.service';\n\n@Component({\n  selector: 'app-program',\n  templateUrl: './program.component.html',\n  styleUrls: ['./program.component.scss'],\n})\nexport class ProgramComponent {\n  @Input() program: Program;\n  @Output() onSelect = new EventEmitter<Program>();\n\n  constructor() {}\n\n  async onProgramClick() {\n    this.onSelect.emit(this.program);\n  }\n\n  isReplay() {\n    const isSport = this.program.title.indexOf(' @ ') > -1 || this.program.title.indexOf(' at ') > -1;\n    if (this.program.repeat && isSport) {\n      return true;\n    }\n  }\n\n  getNextProgramTitle() {\n    const maxLength = 25;\n    const { nextProgramTitle } = this.program;\n    if (nextProgramTitle) {\n      if (nextProgramTitle.length < maxLength) {\n        return nextProgramTitle;\n      } else {\n        return nextProgramTitle.substring(0, maxLength - 3) + '...';\n      }\n    }\n  }\n}\n","module.exports = \"<ion-row *ngIf=\\\"(isLoading$ | async)\\\" margin-vertical>\\n  <ion-spinner name=\\\"crescent\\\" class=\\\"center\\\"></ion-spinner>\\n</ion-row>\\n<ion-list>\\n  <div *ngFor=\\\"let program of (programs$ | async | programsFilter: searchTerm)\\\">\\n    <app-program (onSelect)=\\\"onProgramSelect($event)\\\" [program]=\\\"program\\\"></app-program>\\n  </div>\\n</ion-list>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Jlc2VydmUvY29tcG9uZW50cy9wcm9ncmFtcy9wcm9ncmFtcy5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { Program } from 'src/app/state/program/program.model';\nimport { Store } from '@ngrx/store';\nimport { getAllPrograms, getLoading } from 'src/app/state/program';\nimport { getReservation } from 'src/app/state/reservation';\nimport * as fromStore from '../../../state/app.reducer';\nimport * as fromProgram from '../../../state/program/program.actions';\nimport * as fromReservation from '../../../state/reservation/reservation.actions';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { ReserveService } from '../../reserve.service';\nimport { Reservation } from 'src/app/state/reservation/reservation.model';\nimport { first, take } from 'rxjs/operators';\nimport { ofType, Actions } from '@ngrx/effects';\n\n@Component({\n  templateUrl: './programs.component.html',\n  styleUrls: ['./programs.component.scss'],\n})\nexport class ProgramsComponent implements OnDestroy, OnInit {\n  programs$: Observable<Program[]>;\n  reservation$: Observable<Partial<Reservation>>;\n  isLoading$: Observable<boolean>;\n  title = 'Choose Channel';\n  searchTerm: string;\n  refreshSubscription: Subscription;\n  searchSubscription: Subscription;\n  closeSearchSubscription: Subscription;\n\n  constructor(\n    private store: Store<fromStore.AppState>,\n    private reserveService: ReserveService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private actions$: Actions,\n  ) {\n    this.programs$ = this.store.select(getAllPrograms);\n    this.reservation$ = this.store.select(getReservation);\n    this.reserveService.emitTitle(this.title);\n    this.searchSubscription = this.reserveService.searchTermEmitted$.subscribe(searchTerm => {\n      this.searchTerm = searchTerm;\n    });\n    this.closeSearchSubscription = this.reserveService.closeSearchEmitted$.subscribe(() => {\n      this.searchTerm = null;\n    });\n    this.refreshSubscription = this.reserveService.refreshEmitted$.subscribe(() => this.refresh());\n  }\n\n  ngOnInit() {\n    this.isLoading$ = this.store.select(getLoading);\n    this.reservation$\n      .pipe(first())\n      .subscribe(reservation => this.store.dispatch(new fromProgram.GetAllByLocation(reservation.location)));\n  }\n\n  refresh() {\n    this.reservation$\n      .pipe(first())\n      .subscribe(reservation => this.store.dispatch(new fromProgram.GetAllByLocation(reservation.location)));\n    this.actions$\n      .pipe(ofType(fromProgram.GET_PROGRAMS_SUCCESS))\n      .pipe(first())\n      .subscribe(() => {\n        this.reserveService.emitRefreshed();\n      });\n  }\n\n  ngOnDestroy() {\n    this.refreshSubscription.unsubscribe();\n    this.searchSubscription.unsubscribe();\n    this.closeSearchSubscription.unsubscribe();\n  }\n\n  async onProgramSelect(program: Program) {\n    this.reserveService.emitCloseSearch();\n    this.store.dispatch(new fromReservation.SetProgram(program));\n    // if editing, may already have a tv\n    const state = await this.store.pipe(first()).toPromise();\n    const reservation: Partial<Reservation> = state.reservation.reservation;\n    if (reservation.id && reservation.box && reservation.box.label) {\n      this.router.navigate(['../confirmation'], { relativeTo: this.route, queryParamsHandling: 'merge' });\n    } else {\n      this.router.navigate(['../tvs'], { relativeTo: this.route, queryParamsHandling: 'merge' });\n    }\n  }\n}\n","module.exports = \"<ion-row *ngIf=\\\"(isLoading$ | async)\\\" margin-vertical>\\n  <ion-spinner name=\\\"crescent\\\" class=\\\"center\\\"></ion-spinner>\\n</ion-row>\\n<ion-row>\\n  <ion-col *ngFor=\\\"let tv of (tvs$ | async)\\\" size=\\\"4\\\">\\n    <ion-button\\n      color=\\\"light\\\"\\n      size=\\\"large\\\"\\n      expand=\\\"block\\\"\\n      (click)=\\\"onTvClick(tv)\\\"\\n      [ngClass]=\\\"{ reserved: tv.reserved }\\\"\\n      >{{ tv.label }}</ion-button\\n    >\\n  </ion-col>\\n</ion-row>\\n\\n\"","module.exports = \".reserved {\\n  opacity: 0.3; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90aW1naWJsaW4vQ29kZS9jbGlja2VyL21vYmlsZS9hcHAvc3JjL2FwcC9yZXNlcnZlL2NvbXBvbmVudHMvdHZzL3R2cy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFlBQVksRUFBQSIsImZpbGUiOiJzcmMvYXBwL3Jlc2VydmUvY29tcG9uZW50cy90dnMvdHZzLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnJlc2VydmVkIHtcbiAgb3BhY2l0eTogMC4zO1xufVxuIl19 */\"","import { Component, OnDestroy } from '@angular/core';\nimport { TV } from 'src/app/state/location/tv.model';\nimport { Observable, Subscription } from 'rxjs';\nimport { Reservation } from 'src/app/state/reservation/reservation.model';\nimport { Store } from '@ngrx/store';\nimport { ReserveService } from '../../reserve.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport * as fromStore from '../../../state/app.reducer';\nimport * as fromReservation from '../../../state/reservation/reservation.actions';\nimport { getReservation, getReservationTvs } from 'src/app/state/reservation';\nimport * as fromLocation from '../../../state/location/location.actions';\nimport { ToastController } from '@ionic/angular';\nimport * as moment from 'moment';\nimport { Actions, ofType } from '@ngrx/effects';\nimport { first } from 'rxjs/operators';\nimport { getLoading } from 'src/app/state/location';\n\n@Component({\n  selector: 'app-tvs',\n  templateUrl: './tvs.component.html',\n  styleUrls: ['./tvs.component.scss'],\n})\nexport class TvsComponent implements OnDestroy {\n  tvs$: Observable<TV[]>;\n  reservation$: Observable<Partial<Reservation>>;\n  refreshSubscription: Subscription;\n  title = 'Choose TV';\n  isLoading$: Observable<boolean>;\n\n  constructor(\n    private store: Store<fromStore.AppState>,\n    private reserveService: ReserveService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private toastController: ToastController,\n    private actions$: Actions,\n  ) {\n    this.tvs$ = this.store.select(getReservationTvs);\n    this.reservation$ = this.store.select(getReservation);\n    this.reserveService.emitTitle(this.title);\n    this.refreshSubscription = this.reserveService.refreshEmitted$.subscribe(() => this.refresh());\n  }\n\n  ngOnInit() {\n    this.isLoading$ = this.store.select(getLoading);\n  }\n\n  ngOnDestroy() {\n    this.refreshSubscription.unsubscribe();\n  }\n\n  async onTvClick(tv: TV) {\n    if (tv.reserved) {\n      const toast = await this.toastController.create({\n        message: `${tv.label} is reserved until ${moment(tv.end).format('h:mma')}`,\n        duration: 2000,\n        cssClass: 'ion-text-center',\n      });\n      return toast.present();\n    }\n    this.store.dispatch(new fromReservation.SetTv(tv));\n    this.router.navigate(['../confirmation'], { relativeTo: this.route });\n  }\n\n  refresh() {\n    this.store.dispatch(new fromLocation.GetAll());\n    this.actions$\n      .pipe(ofType(fromLocation.GET_ALL_LOCATIONS_SUCCESS))\n      .pipe(first())\n      .subscribe(() => {\n        this.reserveService.emitRefreshed();\n      });\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { Location } from 'src/app/state/location/location.model';\n\n@Pipe({\n  name: 'locationsFilter',\n})\nexport class LocationsFilterPipe implements PipeTransform {\n  transform(locations: Location[], searchText: string): any[] {\n    if (!locations) return [];\n    if (!searchText) return locations;\n    searchText = searchText.toLowerCase();\n    return locations.filter(p => {\n      return p.name.toLowerCase().includes(searchText) || p.neighborhood.toLowerCase().includes(searchText);\n    });\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { Program } from 'src/app/state/program/program.model';\n\n@Pipe({\n  name: 'programsFilter',\n})\nexport class ProgramsFilterPipe implements PipeTransform {\n  transform(programs: Program[], searchText: string): any[] {\n    if (!programs) return [];\n    if (!searchText) return programs;\n    searchText = searchText.toLowerCase();\n    return programs.filter(p => {\n      return (\n        p.channelTitle.toLowerCase().includes(searchText) || (p.title && p.title.toLowerCase().includes(searchText))\n      );\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ReservePage } from './reserve.page';\nimport { LocationsComponent } from './components/locations/locations.component';\nimport { ProgramsComponent } from './components/programs/programs.component';\nimport { TvsComponent } from './components/tvs/tvs.component';\nimport { MomentModule } from 'ngx-moment';\nimport { ConfirmationComponent } from './components/confirmation/confirmation.component';\nimport { SharedModule } from '../shared/shared.module';\nimport { ProgramsFilterPipe } from './pipes/programs-filter.pipe';\nimport { ReservationGuard } from '../guards/reservation.guard';\nimport { ProgramComponent } from './components/programs/program/program.component';\nimport { LocationsFilterPipe } from './pipes/locations-filter.pipe';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ReservePage,\n    children: [\n      {\n        path: 'locations',\n        component: LocationsComponent,\n      },\n      {\n        path: 'programs',\n        component: ProgramsComponent,\n        canActivate: [ReservationGuard],\n      },\n      {\n        path: 'tvs',\n        component: TvsComponent,\n        canActivate: [ReservationGuard],\n      },\n      {\n        path: 'confirmation',\n        component: ConfirmationComponent,\n        canActivate: [ReservationGuard],\n      },\n      {\n        path: '',\n        redirectTo: 'locations',\n        pathMatch: 'full',\n      },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [SharedModule, CommonModule, FormsModule, IonicModule, MomentModule, RouterModule.forChild(routes)],\n  declarations: [\n    ReservePage,\n    LocationsComponent,\n    ProgramsComponent,\n    ProgramComponent,\n    TvsComponent,\n    ConfirmationComponent,\n    ProgramsFilterPipe,\n    LocationsFilterPipe,\n  ],\n  // exports: [TvsComponent],\n})\nexport class ReservePageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-icon\\n        slot=\\\"icon-only\\\"\\n        name=\\\"search\\\"\\n        *ngIf=\\\"!searchMode && isSearchablePage()\\\"\\n        (click)=\\\"openSearch()\\\"\\n      ></ion-icon>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button class=\\\"show-back-button\\\" *ngIf=\\\"showBack() && !searchMode\\\" (click)=\\\"goBack()\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title *ngIf=\\\"!searchMode\\\"> {{ title }} </ion-title>\\n    <ion-searchbar\\n      *ngIf=\\\"searchMode\\\"\\n      (ionCancel)=\\\"closeSearch()\\\"\\n      (ionChange)=\\\"onSearch($event)\\\"\\n      showCancelButton\\n      animated\\n    ></ion-searchbar>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\" [pullMax]=\\\"300\\\" [disabled]=\\\"disableRefresher()\\\">\\n    <ion-refresher-content\\n      pullingIcon=\\\"arrow-down\\\"\\n      pullingText=\\\"Pull to refresh\\\"\\n      refreshingSpinner=\\\"\\\"\\n      refreshingText=\\\"\\\"\\n    >\\n    </ion-refresher-content>\\n  </ion-refresher>\\n  <router-outlet></router-outlet>\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Jlc2VydmUvcmVzZXJ2ZS5wYWdlLnNjc3MifQ== */\"","import { Component, ViewChild } from '@angular/core';\nimport { NavController, Events, IonSearchbar } from '@ionic/angular';\nimport { ReserveService } from './reserve.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-reserve',\n  templateUrl: './reserve.page.html',\n  styleUrls: ['./reserve.page.scss'],\n})\nexport class ReservePage {\n  @ViewChild(IonSearchbar) searchbar: IonSearchbar;\n  title: String;\n  searchMode: boolean;\n\n  constructor(\n    private reserveService: ReserveService,\n    private navCtrl: NavController,\n    private router: Router,\n    public events: Events,\n  ) {\n    this.reserveService.titleEmitted$.subscribe(title => {\n      this.title = title;\n    });\n    this.reserveService.closeSearchEmitted$.subscribe(x => {\n      this.closeSearch();\n    });\n  }\n\n  goBack() {\n    this.navCtrl.back();\n  }\n\n  showBack() {\n    return this.router.url != '/tabs/reserve/locations';\n  }\n\n  disableRefresher() {\n    return this.router.url === '/tabs/reserve/confirmation';\n  }\n\n  isSearchablePage() {\n    return this.router.url.includes('programs') || this.router.url.includes('locations');\n  }\n\n  openSearch() {\n    this.searchMode = true;\n  }\n\n  closeSearch() {\n    this.searchMode = false;\n  }\n\n  onSearch(e) {\n    this.reserveService.emitSearch(e.detail.value);\n  }\n\n  doRefresh(event) {\n    this.reserveService.emitRefresh();\n    this.reserveService.refreshedEmitted$.pipe().subscribe(() => {\n      event.target.complete();\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ReserveService {\n  private emitTitleSource = new Subject<any>();\n  titleEmitted$ = this.emitTitleSource.asObservable();\n  private emitSearchTermSource = new Subject<any>();\n  searchTermEmitted$ = this.emitSearchTermSource.asObservable();\n  private emitCloseSearchSource = new Subject<any>();\n  closeSearchEmitted$ = this.emitCloseSearchSource.asObservable();\n\n  private emitRefreshSource = new Subject<any>();\n  refreshEmitted$ = this.emitRefreshSource.asObservable();\n  private emitRefreshedSource = new Subject<any>();\n  refreshedEmitted$ = this.emitRefreshedSource.asObservable();\n\n  emitTitle(title: any) {\n    this.emitTitleSource.next(title);\n  }\n\n  emitSearch(term: string) {\n    this.emitSearchTermSource.next(term);\n  }\n\n  emitCloseSearch() {\n    this.emitCloseSearchSource.next();\n  }\n\n  emitRefresh() {\n    this.emitRefreshSource.next();\n  }\n\n  emitRefreshed() {\n    this.emitRefreshedSource.next();\n  }\n}\n","import { createSelector, createFeatureSelector } from '@ngrx/store';\nimport * as fromLocations from './location.reducer';\nimport { State as LocationState } from './location.reducer';\n\nexport const getLocationsState = createFeatureSelector<LocationState>('location');\n\nexport const getAllLocations = createSelector(\n  getLocationsState,\n  fromLocations.getAllLocations,\n);\n\nexport const getLoading = createSelector(\n  getLocationsState,\n  fromLocations.getLoading,\n);\n\nexport const getError = createSelector(\n  getLocationsState,\n  fromLocations.getError,\n);\n","import { createSelector, createFeatureSelector } from '@ngrx/store';\nimport * as fromPrograms from './program.reducer';\nimport { State as ProgramState } from './program.reducer';\n\nexport const getProgramsState = createFeatureSelector<ProgramState>('program');\n\nexport const getAllPrograms = createSelector(\n  getProgramsState,\n  fromPrograms.getAllPrograms,\n);\n\nexport const getLoading = createSelector(\n  getProgramsState,\n  fromPrograms.getLoading,\n);\n\nexport const getError = createSelector(\n  getProgramsState,\n  fromPrograms.getError,\n);\n"],"sourceRoot":""}