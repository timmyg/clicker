<ion-card *ngIf="(reservation$ | async) as reservation">
  <ion-card-header>
    <ion-card-subtitle>{{ reservation.program.channelTitle }}</ion-card-subtitle>
    <ion-card-content>
      <ion-row>
        <ion-col size="1" no-padding align-items-center>
          <ion-icon
            *ngIf="reservation.program.type === 'basketball'"
            name="basketball"
            class="sport"
            size="large"
          ></ion-icon>
          <ion-icon
            *ngIf="reservation.program.type === 'football'"
            name="american-football"
            class="sport"
            size="large"
          ></ion-icon>
          <ion-icon
            *ngIf="reservation.program.type === 'baseball'"
            name="baseball"
            class="sport"
            size="large"
          ></ion-icon>
          <ion-icon *ngIf="reservation.program.type === 'soccer'" name="football" class="sport" size="large"></ion-icon>
        </ion-col>
        <ion-col> {{ reservation.program.title }}</ion-col>
      </ion-row>
    </ion-card-content>
  </ion-card-header>

  <ion-card-content>
    <ion-row>
      <p>
        You are reserving TV #{{ reservation.tv.label }} until {{ reservation.details.end | amDateFormat: 'h:mm a' }}
      </p>
    </ion-row>
    <ion-row align-items-center>
      <b>Tokens:</b> <img class="coin" src="./assets/coin.svg" width="15" height="15" padding-start />
      <span>{{ reservation.details.tokens }}</span>
    </ion-row>
    <ion-list>
      <ion-radio-group (onChange)="onLengthChange()">
        <ion-list-header> Reservation Length </ion-list-header>
        <ion-item>
          <ion-label flex>
            <span>1-time change</span>
            <img class="coin" src="./assets/coin.svg" width="22" height="22" padding-start /> <span>1</span>
          </ion-label>
          <ion-radio slot="start" value="1" checked></ion-radio>
        </ion-item>
        <ion-item>
          <ion-label>30 minutes</ion-label>
          <ion-radio slot="start" value="30"></ion-radio>
        </ion-item>
        <ion-item>
          <ion-label>2 hours</ion-label>
          <ion-radio slot="start" value="120"></ion-radio>
        </ion-item>
      </ion-radio-group>
    </ion-list>
    <ion-button
      color="success"
      size="large"
      expand="block"
      (click)="onConfirm(reservation)"
      slot="end"
      [disabled]="saving"
      margin-top
      align-items-center
    >
      <ion-row *ngIf="!saving; else isSaving">
        <span>Confirm</span> <img class="coin" src="./assets/coin.svg" width="22" height="22" padding-start />
        <span>2</span>
      </ion-row>
      <ng-template #isSaving>
        Tuning
        <ion-spinner name="dots" margin-start></ion-spinner>
      </ng-template>
    </ion-button>
  </ion-card-content>
</ion-card>
