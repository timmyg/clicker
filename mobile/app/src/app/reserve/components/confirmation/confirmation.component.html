<ion-card *ngIf="(reservation$ | async) as reservation">
  <ion-card-content>
    <ion-list-header no-padding> Summary </ion-list-header>
    <div>
      <label> Channel: </label> <span>{{ reservation.program.title }} ({{ reservation.program.channelTitle }})</span>
    </div>
    <div>
      <label> TV: </label> <span>{{ reservation.box.label }}</span>
    </div>
    <div>
      <label> Reservation End: </label> <span>{{ reservation.end | amDateFormat: 'h:mma' }}</span>
    </div>
    <br />
    <p>You will be able to freely change the channel during your reservation.</p>
    <!-- </p> -->
    <ion-button
      color="success"
      size="large"
      expand="block"
      (click)="onConfirm(reservation)"
      slot="end"
      [disabled]="saving || !hasSufficientFunds()"
      margin-top
      align-items-center
    >
      <ion-row *ngIf="!saving; else isSaving">
        <span>Confirm</span> <img class="coin" src="./assets/coin.svg" width="22" height="22" padding-start />
        <span>{{ reservation.cost }}</span>
      </ion-row>
      <ng-template #isSaving>
        Tuning
        <ion-spinner name="crescent" margin-start></ion-spinner>
      </ng-template>
    </ion-button>
    <ion-row class="ion-text-center" *ngIf="reservation.location && reservation.location.name">
      <p class="center">{{ reservation.location.name }} ({{ reservation.location.neighborhood }})</p></ion-row
    >
    <ion-row class="ion-text-center" *ngIf="!hasSufficientFunds()" margin-top>
      <ion-text color="danger">
        Heads up! You only have {{ tokenCount }} <span *ngIf="tokenCount && tokenCount === 1; else tokens">token</span
        ><ng-template #tokens>tokens</ng-template> remaining. Please
        <span *ngIf="!isLoggedIn"><a [routerLink]="'/tabs/profile'">login</a> and </span>
        <a [routerLink]="'/tabs/profile'" *ngIf="isLoggedIn">add funds</a><span *ngIf="!isLoggedIn">add funds</span>.
      </ion-text>
    </ion-row>
  </ion-card-content>
</ion-card>
